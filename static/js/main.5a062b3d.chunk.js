(this["webpackJsonpiot-baseline"]=this["webpackJsonpiot-baseline"]||[]).push([[0],{57:function(e,t,a){e.exports=a(76)},62:function(e,t,a){},64:function(e,t,a){},67:function(e,t,a){},68:function(e,t,a){},70:function(e,t,a){},71:function(e,t,a){},75:function(e,t,a){},76:function(e,t,a){"use strict";a.r(t);var n=a(10),r=a(0),c=a.n(r),o=a(22),l=a.n(o),s=a(32),i=(a(62),a(16)),u=a.n(i),m=a(24),d=a(7),b=a(87),p=a(85),f=a(46),h=Object(r.createContext)(null);function E(){return Object(r.useContext)(h)}a(64);var g=a(78);function v(){var e=Object(r.useState)("/aws-iot-baseline/demo"==="".concat("/aws-iot-baseline","/demo")),t=Object(n.a)(e,2),a=t[0],o=t[1];return c.a.createElement("div",{className:"Welcome"},a&&c.a.createElement(g.a,{variant:"primary",onClose:function(){return o(!1)},dismissible:!0},"You are using Demo Mode. Proceed to the login page and use any password to continue."),c.a.createElement("h1",null,"AWS IoT Baseline"),c.a.createElement("p",null,"An implementation starter kit."))}a(67);var w=a(86),y=a(79),j=a(88),O=a(80),x=a(89);a(68);function k(){var e=Object(r.useRef)(!0),t=Object(r.useState)([]),a=Object(n.a)(t,2),o=a[0],l=a[1],s=E(),i=s.isAuthenticated,d=s.showBasicError;function b(e){return p.apply(this,arguments)}function p(){return(p=Object(m.a)(u.a.mark((function t(a){var n,r;return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,fetch("".concat("/aws-iot-baseline/demo","/v1/things"),{method:"get",headers:new Headers({Authorization:localStorage.getItem("session")})}).catch((function(e){return{ok:!1}}));case 2:if(n=t.sent,e.current){t.next=5;break}return t.abrupt("return");case 5:if(n.ok){t.next=8;break}return d({title:"Unable To Load Data!",body:function(){switch(n.status){case 401:case 403:return"Your session has expired. Please login again.";case 500:return"Unexpected server error.";default:return"Unexpected error."}}(),logout:401===n.status||403===n.status}),t.abrupt("return");case 8:return t.next=10,n.json();case 10:(r=t.sent).things&&a&&(a=a.toLowerCase(),r.things=r.things.filter((function(e){var t=e.attributes&&e.attributes.name;return t&&t.toLowerCase().includes(a)||e.name.toLowerCase().includes(a)}))),l(r.things);case 13:case"end":return t.stop()}}),t)})))).apply(this,arguments)}return Object(r.useEffect)((function(){return i&&b(),function(){return e.current=!1}}),[i]),c.a.createElement(j.a,{className:"ThingsCard"},c.a.createElement(j.a.Header,null,c.a.createElement(O.a,null,c.a.createElement(O.a.Prepend,null,c.a.createElement(O.a.Text,null,"Search")),c.a.createElement(x.a,{placeholder:"All Things",onChange:function(e){return b(e.target.value)}}))),c.a.createElement(j.a.Body,null,o&&0!==o.length?c.a.createElement(w.a,{className:"list-group list-group-flush"},o.map((function(e){return c.a.createElement("div",{key:"thing/".concat(e.name),className:"list-group-item"},c.a.createElement(w.a.Toggle,{as:"div",className:"thing-header",eventKey:e.name},c.a.createElement("h5",null,e.attributes&&e.attributes.name||e.name),e.attributes&&e.attributes.createdAt?c.a.createElement("p",null,"Created: ",new Date(e.attributes.createdAt).toLocaleString()):void 0),c.a.createElement(w.a.Collapse,{eventKey:e.name},c.a.createElement("div",{className:"thing-details"},c.a.createElement(y.a,{striped:!0,bordered:!0,hover:!0,size:"sm"},c.a.createElement("thead",null,c.a.createElement("tr",null,c.a.createElement("th",null,"Attribute"),c.a.createElement("th",null,"Value"))),c.a.createElement("tbody",null,Object.keys(e.attributes).map((function(t){return c.a.createElement("tr",{key:"attribute/".concat(t)},c.a.createElement("td",null,c.a.createElement("input",{value:t})),c.a.createElement("td",null,e.attributes[t]))})))))))}))):c.a.createElement("h5",{className:"empty-label"},"No Things Found")))}function A(){var e=Object(r.useState)("/aws-iot-baseline/demo"==="".concat("/aws-iot-baseline","/demo")),t=Object(n.a)(e,2),a=t[0],o=t[1];return c.a.createElement("div",{className:"Dashboard"},a&&c.a.createElement(g.a,{variant:"primary",onClose:function(){return o(!1)},dismissible:!0},"You are using Demo Mode. The data displayed below is read from static files and written into browser storage. Any changes you make will only affect the browser storage. You can logout to reset the data."),c.a.createElement(k,null))}var C=a(81),N=a(90),S=a(82),L=a(83);a(70);function T(e){try{var t=e.split(".")[1];return t=t.replace(/-/g,"+").replace(/_/g,"/"),JSON.parse(decodeURIComponent(atob(t).split("").map((function(e){return"%"+("00"+e.charCodeAt(0).toString(16)).slice(-2)})).join("")))}catch(a){return null}}function P(){var e=Object(r.useState)("/aws-iot-baseline/demo"==="".concat("/aws-iot-baseline","/demo")),t=Object(n.a)(e,2),a=t[0],o=t[1],l=E(),s=l.setAuthenticated,i=l.showBasicError,d=Object(r.useState)(!1),b=Object(n.a)(d,2),p=b[0],f=b[1],h=Object(r.useState)(""),v=Object(n.a)(h,2),w=v[0],y=v[1],j=function(e){return new Promise((function(t){return setTimeout(t,e)}))};function O(){return(O=Object(m.a)(u.a.mark((function e(){var t,a,n,r,c;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=Date.now(),f(!0),e.next=4,fetch("".concat("/aws-iot-baseline/demo","/v1/authenticate"),{method:"get",cache:"no-store",headers:new Headers({Authorization:btoa(w)})}).catch((function(e){return{ok:!1}}));case 4:if(a=e.sent,n=1500-(Date.now()-t),e.t0=n>0,!e.t0){e.next=10;break}return e.next=10,j(n);case 10:if(a.ok){e.next=14;break}return f(!1),i({title:"Unable To Login!",body:function(){switch(a.status){case 401:return"Invalid password. Please try again.";case 500:return"Unexpected server error.";default:return"Unexpected error."}}()}),e.abrupt("return");case 14:return e.next=16,a.text();case 16:if(r=e.sent,(c=T(r))&&!(Date.now()>=1e3*c.exp)){e.next=22;break}return f(!1),i({title:"Unable To Login!",body:"Invalid session. Please login again."}),e.abrupt("return");case 22:localStorage.setItem("session",r),s(!0);case 24:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return c.a.createElement("div",{className:"Login"},a&&c.a.createElement(g.a,{variant:"primary",onClose:function(){return o(!1)},dismissible:!0},"You are using Demo Mode. Any password below will be accepted."),c.a.createElement("form",{onSubmit:function(e){e.preventDefault(),function(){O.apply(this,arguments)}()}},c.a.createElement(C.a,{controlId:"iot-baseline-password"},c.a.createElement(N.a,null,"Password"),c.a.createElement(x.a,{autoFocus:!0,type:"password",value:w,onChange:function(e){return y(e.target.value)}})),c.a.createElement(S.a,{block:!0,type:"submit",variant:"primary",disabled:p||0===w.length},p?c.a.createElement(c.a.Fragment,null,c.a.createElement(L.a,{animation:"grow",size:"sm",className:"spinner-1"}),c.a.createElement(L.a,{animation:"grow",size:"sm",className:"spinner-2"}),c.a.createElement(L.a,{animation:"grow",size:"sm",className:"spinner-3"})):c.a.createElement("span",{className:"align-middle"},"Login"))))}a(71);function D(){return c.a.createElement("div",{className:"NotFound"},c.a.createElement("h3",null,"Sorry, page not found!"))}var U="/aws-iot-baseline/#";function I(e){var t=e.children,a=Object(f.a)(e,["children"]),n=E().isAuthenticated;return c.a.createElement(d.b,a,n?t:c.a.createElement(d.a,{to:"/"}))}function B(e){var t=e.children,a=Object(f.a)(e,["children"]),n=E().isAuthenticated;return c.a.createElement(d.b,a,n?c.a.createElement(d.a,{to:"/dashboard"}):t)}function R(){return c.a.createElement(d.d,null,c.a.createElement(B,{exact:!0,path:"/"},c.a.createElement(v,null)),c.a.createElement(B,{exact:!0,path:"/login"},c.a.createElement(P,null)),c.a.createElement(I,{exact:!0,path:"/dashboard"},c.a.createElement(A,null)),c.a.createElement(d.b,{component:D}))}a(75);var _=a(84);function H(e){var t=e.details,a=function(){return e.onHide(t)};return t?c.a.createElement(_.a,{show:!0,onHide:a},c.a.createElement(_.a.Header,null,c.a.createElement(_.a.Title,null,t.title)),c.a.createElement(_.a.Body,null,t.body),c.a.createElement(_.a.Footer,null,c.a.createElement(S.a,{variant:"primary",onClick:a},t.close||"Close"))):null}function z(){var e=Object(r.useState)(!1),t=Object(n.a)(e,2),a=t[0],o=t[1],l=Object(r.useState)(void 0),s=Object(n.a)(l,2),i=s[0],f=s[1],E=Object(d.g)();function g(){return v.apply(this,arguments)}function v(){return(v=Object(m.a)(u.a.mark((function e(){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:localStorage.clear(),o(!1);case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}Object(r.useEffect)((function(){var e=T(localStorage.getItem("session"));o(e&&Date.now()<1e3*e.exp)}),[]);var w={isAuthenticated:a,setAuthenticated:o,showBasicError:f};return c.a.createElement("div",{className:"App container"},c.a.createElement(b.a,{bg:"light"},c.a.createElement(b.a.Brand,{href:"".concat(U,"/")},c.a.createElement("span",{className:"navbar-icon material-icons"},"developer_board"),c.a.createElement("span",{className:"navbar-label"},"Baseline Manager")),c.a.createElement(b.a.Collapse,{className:"justify-content-end"},c.a.createElement(p.a,null,a?c.a.createElement(p.a.Link,{href:"".concat(U,"/logout"),onClick:function(e){e.preventDefault(),g()}},"Logout"):"/login"!==E.pathname?c.a.createElement(p.a.Link,{href:"".concat(U,"/login")},"Login"):void 0))),c.a.createElement(h.Provider,{value:w},c.a.createElement(R,null),c.a.createElement(H,{details:i,onHide:function(){var e=Object(m.a)(u.a.mark((function e(t){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(f(void 0),!0!==t.logout){e.next=4;break}return e.next=4,g();case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()})))}console.log("PUBLIC_URL = '".concat("/aws-iot-baseline","'")),console.log("REACT_APP_API_URL = '".concat("/aws-iot-baseline/demo","'")),console.log("REACT_APP_ROUTER_CLASS = '".concat("HashRouter","'"));var F=[s.b,{}],Y=Object(n.a)(F,2),M=Y[0],J=Y[1];l.a.render(c.a.createElement(M,J,c.a.createElement(z,null)),document.getElementById("root"))}},[[57,1,2]]]);
//# sourceMappingURL=main.5a062b3d.chunk.js.map